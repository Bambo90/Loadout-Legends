<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loadout Legends</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <aside id="sidebar">
            <div class="logo">
                <h2>LL</h2>
                <span>v0.1</span>
            </div>
            <nav id="main-nav">
                <button class="nav-btn active" onclick="switchTab('grind')">âš”ï¸ Abenteuer</button>
                <button class="nav-btn" onclick="switchTab('equipment')">ğŸ›¡ï¸ AusrÃ¼stung</button>
                <button class="nav-btn" onclick="switchTab('shop')">ğŸ’° Shop</button>
                <button class="nav-btn" onclick="switchTab('stats')">ğŸ“Š Stats</button>
            </nav>
            <div class="sidebar-footer">
                <button id="save-btn" onclick="saveGame()">ğŸ’¾ Speichern</button>
                <button id="reset-btn" onclick="resetGame()">ğŸ—‘ï¸ Spielstand lÃ¶schen</button>
            </div>
        </aside>

        <main id="main-view">
            <header id="top-bar">
                <div class="stat-item"><span class="label">GOLD</span><span id="gold-display" class="value">0</span></div>
                <div class="stat-item"><span class="label">LEVEL</span><span id="level-display" class="value">1</span></div>
                <div class="hp-header-container"><div id="hp-fill-header"></div><span id="hp-text-header">HP: 100 / 100</span></div>
                <div class="xp-header-container"><div id="xp-fill-header"></div><span id="xp-text-header">XP: 0 / 500</span></div>
                <div class="bonus-display">
                    <span class="label">BONUSES</span>
                    <span id="bonus-display" class="bonus-value">1.0x</span>
                </div>
            </header>

            <section id="content-area">
                <div id="tab-grind" class="tab-content active">
                    <div class="hub-header">
                        <h3>Abenteuer-Zentrum</h3>
                        <p>WÃ¤hle einen Modus zum Spielen.</p>
                    </div>
                    <div class="adventure-hub">
                        <div class="adventure-card" style="--card-bg: linear-gradient(135deg, #2a4a2a 0%, #1a3a1a 100%);">
                            <div class="card-main-content">
                                <h4>ğŸ“– Chroniken</h4>
                                <p class="card-desc">Story-Kampagne und Episoden</p>
                            </div>
                            <div class="card-dropdown">
                                <button class="dropdown-item" onclick="alert('Welt - Coming Soon!')">ğŸŒ Welt</button>
                                <button class="dropdown-item" onclick="alert('Karten - Coming Soon!')">ğŸ—ºï¸ Karten</button>
                                <button class="dropdown-item" onclick="alert('Dungeons - Coming Soon!')">ğŸ° Dungeons</button>
                                <button class="dropdown-item" onclick="alert('Bosse - Coming Soon!')">ğŸ‘¹ Bosse</button>
                            </div>
                        </div>
                        <div class="adventure-card" style="--card-bg: linear-gradient(135deg, #4a2a2a 0%, #3a1a1a 100%);">
                            <div class="card-main-content">
                                <h4>âš”ï¸ Arena</h4>
                                <p class="card-desc">PvE-KÃ¤mpfe und Herausforderungen</p>
                            </div>
                            <div class="card-dropdown">
                                <button class="dropdown-item" onclick="alert('PVP (ungewertet) - Coming Soon!')">ğŸ® PVP (ungewertet)</button>
                                <button class="dropdown-item" onclick="alert('PVP (gewertet) - Coming Soon!')">ğŸ† PVP (gewertet)</button>
                                <button class="dropdown-item" onclick="alert('Draft Modus - Coming Soon!')">ğŸ² Draft Modus</button>
                                <button class="dropdown-item" onclick="alert('Mutatoren Liga - Coming Soon!')">âš¡ Mutatoren Liga</button>
                                <button class="dropdown-item" onclick="alert('Spiegel Challenge - Coming Soon!')">ğŸª Spiegel Challenge</button>
                            </div>
                        </div>
                        <div class="adventure-card" style="--card-bg: linear-gradient(135deg, #2a3a4a 0%, #1a2a3a 100%);">
                            <div class="card-main-content">
                                <h4>â›ï¸ Ressourcen</h4>
                                <p class="card-desc">Farmen und Sammeln</p>
                            </div>
                            <div class="card-dropdown">
                                <button class="dropdown-item" onclick="alert('HolzfÃ¤llerei - Coming Soon!')">ğŸª“ HolzfÃ¤llerei</button>
                                <button class="dropdown-item" onclick="alert('Bergbau - Coming Soon!')">â›ï¸ Bergbau</button>
                                <button class="dropdown-item" onclick="alert('Fischen - Coming Soon!')">ğŸ£ Fischen</button>
                                <button class="dropdown-item" onclick="alert('Landwirtschaft - Coming Soon!')">ğŸŒ¾ Landwirtschaft</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-equipment" class="tab-content">
                    <div class="hub-header">
                        <h3>AusrÃ¼stungs-Zentrum</h3>
                        <p>Klicke auf ein Set oder das Lager zum Verwalten.</p>
                    </div>
                    <div class="equipment-hub">
                        <div class="loadout-preview-card" onclick="openWorkshop('farm')">
                            <h4>ğŸšœ Farm Setup</h4>
                            <div id="preview-farm" class="preview-grid"></div>
                        </div>
                        <div class="loadout-preview-card" onclick="openWorkshop('pve')">
                            <h4>âš”ï¸ PvE Setup</h4>
                            <div id="preview-pve" class="preview-grid"></div>
                        </div>
                        <div class="loadout-preview-card" onclick="savePlayerSnapshot(); alert('Snapshot saved for PvP!')">
                            <h4>ğŸ† PvP (Ranked)</h4>
                            <div id="preview-pvp" class="preview-grid"></div>
                        </div>
                        <div class="loadout-preview-card" onclick="openWorkshop('storage')">
                             <h4>ğŸ“¦ Storage</h4> <div id="preview-bank-small" class="preview-grid"></div>
                        </div>
                    </div>
                </div>

                <div id="tab-shop" class="tab-content">
                    <h3>Marktplatz</h3>
                    <div id="shop-container" class="shop-grid"></div>
                </div>

                <div id="tab-stats" class="tab-content">
                    <h3>Statistiken</h3>
                    <div class="stats-grid">
                        <div class="stat-card"><span class="stat-label">Gold / Sek</span><span id="stat-gps" class="stat-value">0</span></div>
                        <div class="stat-card"><span class="stat-label">Gold gesamt</span><span id="stat-total-gold" class="stat-value">0</span></div>
                        <div class="stat-card"><span class="stat-label">XP gesamt</span><span id="stat-total-xp" class="stat-value">0</span></div>
                    </div>
                </div>
            </section>
        </main>

        <div id="workshop-overlay" class="hidden">
            <div class="workshop-header">
                <h2 id="workshop-title">Workshop</h2>
                <div style="flex: 1;"></div>
                <button class="close-workshop" onclick="closeWorkshop()">ğŸ’¾ Speichern</button>
            </div>
            <div class="workshop-content">
                <div class="bank-section">
                    <!-- Storage Header -->
                    <div class="storage-header">
                        <h3 id="bank-header">Storage</h3>
                        <div class="storage-controls">
                            <select id="category-filter" onchange="setStorageFilter(this.value)">
                                <option value="all">ğŸ“¦ Alle Kategorien</option>
                                <option value="weapon">âš”ï¸ Waffen</option>
                                <option value="armor">ğŸ›¡ï¸ RÃ¼stung</option>
                                <option value="accessory">ğŸ’ Schmuck</option>
                                <option value="tool">â›ï¸ Werkzeuge</option>
                                <option value="material">ğŸ“¦ Materialien</option>
                            </select>
                            <input type="text" id="storage-search" placeholder="ğŸ” Suchen..." oninput="setStorageSearch(this.value)" />
                            <button id="auto-sort-btn" onclick="autoSortStorage(currentWorkshop === 'storage' ? 'bank' : currentWorkshop + 'Grid')" title="Automatisch sortieren">ğŸ”„</button>
                            <button id="bulk-sell-btn" onclick="toggleBulkSellMode()" title="Massenverkauf">ğŸ’°</button>
                        </div>
                    </div>
                    
                    <!-- Storage Grid -->
                    <div id="bank-grid" class="inventory-grid scrollable-grid storage-grid"></div>
                        
                    <!-- Sell Zone (hidden in bulk mode) -->
                    <div id="sell-zone">ğŸ’° Hierher ziehen zum Verkaufen</div>
                    
                    <!-- Bulk Sell Actions -->
                    <div id="bulk-sell-actions" style="display: none;">
                        <button id="execute-bulk-sell" onclick="executeBulkSell(currentWorkshop === 'storage' ? 'bank' : currentWorkshop + 'Grid')">ğŸ’¸ AusgewÃ¤hlte verkaufen</button>
                        <button onclick="toggleBulkSellMode()">âŒ Abbrechen</button>
                    </div>
                </div>
                <div class="active-grid-section">
                    <h3>AusrÃ¼stung</h3>
                    <div id="active-setup-grid" class="inventory-grid"></div>
                </div>
            </div>
        </div>
    </div>
    <div id="tooltip" class="hidden"></div>
    
<!-- ITEMS & ENGINES -->
<script src="tools.js"></script>
<script src="swords.js"></script>
<script src="bows.js"></script>
<script src="armor.js"></script>
<script src="shields.js"></script>
<script src="accessories.js"></script>
<script src="itemRegistry.js"></script>
<!-- Legacy item files (keep for now, gradual migration) -->
<script src="weapons.js"></script>
<script src="jewelry.js"></script>
<script src="monsters.js"></script>

<script src="itemsEngine.js"></script>
<script src="utils.js"></script>
<script src="gridEngine.js"></script>
<script src="customDrag.js"></script>
<script src="dragdropengine.js"></script>
<script src="workshopEngine.js"></script>
<script src="storageEngine.js"></script>

<script src="saveengine.js"></script>
<script src="pvp.js"></script>

<script src="script.js"></script>

</body>
</html>